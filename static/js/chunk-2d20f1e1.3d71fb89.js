(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f1e1"],{b1ea:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:t.dynamicValidateForm,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}},[a("el-input",{model:{value:t.dynamicValidateForm.email,callback:function(e){t.$set(t.dynamicValidateForm,"email",e)},expression:"dynamicValidateForm.email"}})],1),t._l(t.dynamicValidateForm.domains,(function(e,n){return a("el-form-item",{key:e.key,attrs:{label:"域名"+n,prop:"domains."+n+".value",rules:{required:!0,message:"域名不能为空",trigger:"blur"}}},[a("el-input",{model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"domain.value"}}),a("el-button",{on:{click:function(a){return a.preventDefault(),t.removeDomain(e)}}},[t._v("删除")])],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("dynamicValidateForm")}}},[t._v("提交")]),a("el-button",{on:{click:t.addDomain}},[t._v("新增域名")]),a("el-button",{on:{click:function(e){return t.resetForm("dynamicValidateForm")}}},[t._v("重置")])],1)],2)],1)},i=[],o=a("1da1"),s=(a("96cf"),a("a15b"),a("99af"),a("d3b7"),a("159b"),a("b0c0"),a("ac1f"),a("841c"),a("1276"),a("c00a")),c=a("c9f7"),r=a("61f7"),u=a("4e29"),l=a("c7d5"),h=a("5166"),m={name:"caiManage",components:{SvgIcon:s["a"]},data:function(){var t=this;return{reposList:[],pathArr:[{value:"",label:"根目录"}],activeRepos:"",activePath:[""],pathProps:{lazy:!0,checkStrictly:!0,lazyLoad:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a,n){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=a.path.join("/"),o=[],e.next=4,t.getReposContents(o,i);case 4:n(o);case 5:case"end":return e.stop()}}),e)})));function a(t,a){return e.apply(this,arguments)}return a}()},hintShow1:!0,hintShow2:!0,hintShow3:!0,fileList:[],resourceShow:0,isDrawerShow:!1,nameType:"1",uploadList:[],isCDN:!0,isCustomPath:!1,customPath:"",dynamicValidateForm:{domains:[{value:""}],email:""}}},computed:{realPath:function(){return this.isCustomPath?"/".concat(this.userInfo.login,"/").concat(this.activeRepos,"/").concat(this.customPath):"/".concat(this.userInfo.login,"/").concat(this.activeRepos).concat(this.activePath.join("/"),"/")}},created:function(){var t=localStorage.getItem("githubToken"),e=localStorage.getItem("githubUserInfo");t&&e?this.userInfo=JSON.parse(e):(this.msgError("请先配置Token"),this.$router.push("/setting"))},methods:{getRepos:function(){var t=this;Object(c["d"])(this.userInfo.login).then((function(e){t.reposList=e}))},changeRepos:function(){this.resourceShow++,this.activePath=[""],this.fileList=[]},getReposContents:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(c["b"])(a.userInfo.login,a.activeRepos,e).then((function(e){e.forEach((function(e){"dir"===e.type&&t.push({value:e.name,label:e.name,leaf:!1})}))}));case 2:case"end":return n.stop()}}),n)})))()},search:function(){var t=this;this.fileList=[];var e=this.activePath.join("/");Object(c["b"])(this.userInfo.login,this.activeRepos,e).then((function(e){e.forEach((function(e){"file"===e.type&&Object(r["b"])(e.name)&&t.fileList.push(e)}))}))},noDisplay:function(t){localStorage.setItem("hintShow".concat(t),"1")},imgUrl:function(t){return this.isCDN?"https://java.xxfatai.tk/image/".concat(t.path):t.download_url},copy:function(t,e){var a="https://java.xxfatai.tk/image/".concat(e.path),n=a;2==t&&(n="![".concat(e.name,"](").concat(a,")")),Object(l["a"])(n),this.msgSuccess("复制成功")},delFile:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={message:"Delete file via PictureHosting",sha:t.sha};Object(c["a"])(e.userInfo.login,e.activeRepos,t.path,a).then((function(){e.msgSuccess("删除成功"),e.search()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},submitUpload:function(){this.uploadList=this.$refs.uploadRef.uploadFiles,this.uploadList.length?this.$refs.uploadRef.submit():this.msgError("请先选择文件")},upload:function(t){var e=this,a=new FileReader;a.readAsDataURL(t.file),a.onload=function(){var n=a.result.split(",")[1],i=t.file.name;"2"===e.nameType&&(i=Object(u["a"])()+i.substr(i.lastIndexOf("."))),Object(h["a"])((function(){return e.push2Github(t,i,n)}),1e3)}},push2Github:function(t,e,a){var n=this,i={message:"Add files via PictureHosting",content:a},o=this.activePath.join("/");this.isCustomPath&&("/"===this.customPath?o="":(o=this.customPath,"/"!==o.charAt(0)&&(o="/"+o),"/"===o.charAt(o.length-1)&&(o=o.substring(0,o.length-1)))),Object(c["e"])(this.userInfo.login,this.activeRepos,o,e,i).then((function(){n.msgSuccess("上传成功"),t.onSuccess()}))}}},f=m,p=a("2877"),d=Object(p["a"])(f,n,i,!1,null,"4ed4a21c",null);e["default"]=d.exports}}]);